<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="1000" height="1200" viewBox="0 0 1000 1200">
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="8" refY="5" orient="auto">
      <path d="M0,0 L10,5 L0,10 z" fill="#333" />
    </marker>
    <style>
      .box { fill:#fff; stroke:#1f2937; stroke-width:2; rx:8; }
      .group { fill:#eef2ff; stroke:#93c5fd; stroke-width:1; }
      .title { font: bold 18px sans-serif; fill:#0f172a; }
      .label { font: 13px sans-serif; fill:#0f172a; }
      .step { font: 12px sans-serif; fill:#374151; }
    </style>
  </defs>

  <text x="500" y="32" text-anchor="middle" class="title">CRUD Flowchart — Add / Edit / Delete</text>

  <!-- Add Flow -->
  <rect x="40" y="60" width="920" height="160" class="group" rx="8" />
  <text x="60" y="92" class="title">Add Employee (Create)</text>
  <rect x="80" y="110" width="220" height="60" class="box"/>
  <text x="100" y="142" class="label">User opens Add Form</text>
  <rect x="340" y="110" width="240" height="60" class="box"/>
  <text x="360" y="142" class="label">Fill form (`EmployeeForm`)</text>
  <rect x="620" y="110" width="220" height="60" class="box"/>
  <text x="640" y="142" class="label">POST /api/google-sheets</text>
  <line x1="300" y1="140" x2="340" y2="140" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
  <line x1="580" y1="140" x2="620" y2="140" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>

  <rect x="340" y="200" width="240" height="60" class="box"/>
  <text x="360" y="232" class="label">`app/api/google-sheets/route.ts`</text>
  <line x1="740" y1="140" x2="460" y2="200" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>

  <rect x="340" y="280" width="320" height="60" class="box"/>
  <text x="360" y="312" class="label">`lib/google-sheets.ts` — append row</text>
  <line x1="500" y1="260" x2="500" y2="280" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>

  <rect x="340" y="360" width="320" height="40" class="box"/>
  <text x="360" y="386" class="label">Google Sheets — append row (service-account)</text>
  <line x1="500" y1="340" x2="500" y2="360" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>

  <rect x="340" y="420" width="320" height="40" class="box"/>
  <text x="360" y="446" class="label">Return success → API → Client (refresh list)</text>
  <line x1="500" y1="400" x2="500" y2="420" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>

  <!-- Edit Flow -->
  <rect x="40" y="520" width="920" height="220" class="group" rx="8" />
  <text x="60" y="552" class="title">Edit Employee (Update)</text>
  <rect x="80" y="580" width="220" height="60" class="box"/>
  <text x="100" y="612" class="label">User clicks Edit on `EmployeeCard`</text>
  <rect x="340" y="580" width="240" height="60" class="box"/>
  <text x="360" y="612" class="label">Form pre-filled → submit</text>
  <rect x="620" y="580" width="220" height="60" class="box"/>
  <text x="640" y="612" class="label">PUT /api/google-sheets/[employeeId]</text>
  <line x1="300" y1="610" x2="340" y2="610" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
  <line x1="580" y1="610" x2="620" y2="610" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>

  <rect x="340" y="660" width="320" height="60" class="box"/>
  <text x="360" y="692" class="label">`app/api/google-sheets/[employeeId]/route.ts`</text>
  <line x1="500" y1="640" x2="500" y2="660" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>

  <rect x="340" y="740" width="320" height="60" class="box"/>
  <text x="360" y="772" class="label">`lib/google-sheets.ts` — find row &amp; update</text>
  <line x1="500" y1="720" x2="500" y2="740" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>

  <rect x="340" y="820" width="320" height="40" class="box"/>
  <text x="360" y="846" class="label">Google Sheets — update row → return status</text>
  <line x1="500" y1="800" x2="500" y2="820" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>

  <!-- Delete Flow -->
  <rect x="40" y="880" width="920" height="200" class="group" rx="8" />
  <text x="60" y="912" class="title">Delete Employee</text>
  <rect x="80" y="940" width="320" height="60" class="box"/>
  <text x="100" y="972" class="label">User clicks Delete on `EmployeeCard`</text>
  <rect x="440" y="940" width="320" height="60" class="box"/>
  <text x="460" y="972" class="label">Confirm → DELETE /api/google-sheets/[employeeId]</text>
  <line x1="400" y1="972" x2="440" y2="972" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>

  <rect x="440" y="1020" width="320" height="60" class="box"/>
  <text x="460" y="1052" class="label">API route → `lib/google-sheets.ts` — delete row</text>
  <line x1="600" y1="1000" x2="600" y2="1020" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>

  <rect x="440" y="1100" width="320" height="40" class="box"/>
  <text x="460" y="1126" class="label">Google Sheets — remove row → return success</text>
  <line x1="600" y1="1080" x2="600" y2="1100" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>

  <!-- Notes -->
  <text x="60" y="1160" class="step">Notes: All API calls validate session via `lib/auth.ts`. Client refreshes list after success (or hooks/useIdleFetch poll).</text>

</svg>
